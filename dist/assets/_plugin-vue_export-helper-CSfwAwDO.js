import{a4 as De,am as $t,i as Te,c as K,d as xe,n as le,ac as On,m as Oe,f as Pe,av as Cn,z as Ee,t as fe,k as Ce,r as ae,aQ as St,a2 as Nn,a0 as Ot,a1 as Bn,A as nt,aR as Pn,G as Ct,b as Nt,at as Bt,T as Pt,p as Mt,j as Ne,s as Lt,v as kt,x as Fe,C as Mn,a7 as Ln,Q as zt,ag as kn,H as et,I as Ue,D as zn,aq as Yn,aS as Fn,aj as Un,aI as Wn,ad as Hn,aH as jn,aT as Vn,aU as Yt}from"./index-Benjlr5I.js";function Kn(o){const h=$t();h&&De(h.proxy,o)}let Gn=2e3;const Xn=()=>++Gn,[Qn,Be]=Te("loading"),qn=Array(12).fill(null).map((o,h)=>K("i",{class:Be("line",String(h+1))},null)),Zn=K("svg",{class:Be("circular"),viewBox:"25 25 50 50"},[K("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),Jn={size:le,type:Oe("circular"),color:String,vertical:Boolean,textSize:le,textColor:String};var er=xe({name:Qn,props:Jn,setup(o,{slots:h}){const T=Pe(()=>De({color:o.color},Cn(o.size))),E=()=>{const _=o.type==="spinner"?qn:Zn;return K("span",{class:Be("spinner",o.type),style:T.value},[h.icon?h.icon():_])},P=()=>{var _;if(h.default)return K("span",{class:Be("text"),style:{fontSize:On(o.textSize),color:(_=o.textColor)!=null?_:o.color}},[h.default()])};return()=>{const{type:_,vertical:$}=o;return K("div",{class:Be([_,{vertical:$}]),"aria-live":"polite","aria-busy":!0},[E(),P()])}}});const Rr=Ee(er),Ft={show:Boolean,zIndex:le,overlay:fe,duration:le,teleport:[String,Object],lockScroll:fe,lazyRender:fe,beforeClose:Function,overlayProps:Object,overlayStyle:Object,overlayClass:Ce,transitionAppear:Boolean,closeOnClickOverlay:fe},$r=Object.keys(Ft);function tr(o,h){return o>h?"horizontal":h>o?"vertical":""}function nr(){const o=ae(0),h=ae(0),T=ae(0),E=ae(0),P=ae(0),_=ae(0),$=ae(""),w=ae(!0),A=()=>$.value==="vertical",C=()=>$.value==="horizontal",z=()=>{T.value=0,E.value=0,P.value=0,_.value=0,$.value="",w.value=!0};return{move:(N=>{const Y=N.touches[0];T.value=(Y.clientX<0?0:Y.clientX)-o.value,E.value=Y.clientY-h.value,P.value=Math.abs(T.value),_.value=Math.abs(E.value);const G=10;(!$.value||P.value<G&&_.value<G)&&($.value=tr(P.value,_.value)),w.value&&(P.value>St||_.value>St)&&(w.value=!1)}),start:(N=>{z(),o.value=N.touches[0].clientX,h.value=N.touches[0].clientY}),reset:z,startX:o,startY:h,deltaX:T,deltaY:E,offsetX:P,offsetY:_,direction:$,isVertical:A,isHorizontal:C,isTap:w}}let $e=0;const It="van-overflow-hidden";function rr(o,h){const T=nr(),E="01",P="10",_=z=>{T.move(z);const c=T.deltaY.value>0?P:E,x=Pn(z.target,o.value),{scrollHeight:N,offsetHeight:Y,scrollTop:G}=x;let m="11";G===0?m=Y>=N?"00":"01":G+Y>=N&&(m="10"),m!=="11"&&T.isVertical()&&!(parseInt(m,2)&parseInt(c,2))&&Ct(z,!0)},$=()=>{document.addEventListener("touchstart",T.start),document.addEventListener("touchmove",_,{passive:!1}),$e||document.body.classList.add(It),$e++},w=()=>{$e&&(document.removeEventListener("touchstart",T.start),document.removeEventListener("touchmove",_),$e--,$e||document.body.classList.remove(It))},A=()=>h()&&$(),C=()=>h()&&w();Nn(A),Ot(C),Bn(C),nt(h,z=>{z?$():w()})}function Ut(o){const h=ae(!1);return nt(o,T=>{T&&(h.value=T)},{immediate:!0}),T=>()=>h.value?T():null}const tt=()=>{var o;const{scopeId:h}=((o=$t())==null?void 0:o.vnode)||{};return h?{[h]:""}:null},[ar,or]=Te("overlay"),ir={show:Boolean,zIndex:le,duration:le,className:Ce,lockScroll:fe,lazyRender:fe,customStyle:Object,teleport:[String,Object]};var sr=xe({name:ar,inheritAttrs:!1,props:ir,setup(o,{attrs:h,slots:T}){const E=ae(),P=Ut(()=>o.show||!o.lazyRender),_=w=>{o.lockScroll&&Ct(w,!0)},$=P(()=>{var w;const A=De(Mt(o.zIndex),o.customStyle);return Ne(o.duration)&&(A.animationDuration=`${o.duration}s`),Lt(K("div",Fe({ref:E,style:A,class:[or(),o.className]},h),[(w=T.default)==null?void 0:w.call(T)]),[[kt,o.show]])});return Nt("touchmove",_,{target:E}),()=>{const w=K(Bt,{name:"van-fade",appear:!0},{default:$});return o.teleport?K(Pt,{to:o.teleport},{default:()=>[w]}):w}}});const ur=Ee(sr),cr=De({},Ft,{round:Boolean,position:Oe("center"),closeIcon:Oe("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:Oe("top-right"),destroyOnClose:Boolean,safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[fr,Dt]=Te("popup");var lr=xe({name:fr,inheritAttrs:!1,props:cr,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(o,{emit:h,attrs:T,slots:E}){let P,_;const $=ae(),w=ae(),A=Ut(()=>o.show||!o.lazyRender),C=Pe(()=>{const S={zIndex:$.value};if(Ne(o.duration)){const O=o.position==="center"?"animationDuration":"transitionDuration";S[O]=`${o.duration}s`}return S}),z=()=>{P||(P=!0,$.value=o.zIndex!==void 0?+o.zIndex:Xn(),h("open"))},c=()=>{P&&kn(o.beforeClose,{done(){P=!1,h("close"),h("update:show",!1)}})},x=S=>{h("clickOverlay",S),o.closeOnClickOverlay&&c()},N=()=>{if(o.overlay){const S=De({show:o.show,class:o.overlayClass,zIndex:$.value,duration:o.duration,customStyle:o.overlayStyle,role:o.closeOnClickOverlay?"button":void 0,tabindex:o.closeOnClickOverlay?0:void 0},o.overlayProps);return K(ur,Fe(S,tt(),{onClick:x}),{default:E["overlay-content"]})}},Y=S=>{h("clickCloseIcon",S),c()},G=()=>{if(o.closeable)return K(Ue,{role:"button",tabindex:0,name:o.closeIcon,class:[Dt("close-icon",o.closeIconPosition),et],classPrefix:o.iconPrefix,onClick:Y},null)};let m;const F=()=>{m&&clearTimeout(m),m=setTimeout(()=>{h("opened")})},B=()=>h("closed"),b=S=>h("keydown",S),U=A(()=>{var S;const{destroyOnClose:O,round:j,position:q,safeAreaInsetTop:V,safeAreaInsetBottom:M,show:ee}=o;if(!(!ee&&O))return Lt(K("div",Fe({ref:w,style:C.value,role:"dialog",tabindex:0,class:[Dt({round:j,[q]:q}),{"van-safe-area-top":V,"van-safe-area-bottom":M}],onKeydown:b},T,tt()),[(S=E.default)==null?void 0:S.call(E),G()]),[[kt,ee]])}),l=()=>{const{position:S,transition:O,transitionAppear:j}=o,q=S==="center"?"van-fade":`van-popup-slide-${S}`;return K(Bt,{name:O||q,appear:j,onAfterEnter:F,onAfterLeave:B},{default:U})};return nt(()=>o.show,S=>{S&&!P&&(z(),T.tabindex===0&&zn(()=>{var O;(O=w.value)==null||O.focus()})),!S&&P&&(P=!1,h("close"))}),Kn({popupRef:w}),rr(w,()=>o.show&&o.lockScroll),Nt("popstate",()=>{o.closeOnPopstate&&(c(),_=!1)}),Mn(()=>{o.show&&z()}),Ln(()=>{_&&(h("update:show",!0),_=!1)}),Ot(()=>{o.show&&o.teleport&&(c(),_=!0)}),Yn(Fn,()=>o.show),()=>o.teleport?K(Pt,{to:o.teleport},{default:()=>[N(),l()]}):K(zt,null,[N(),l()])}});const Or=Ee(lr),[dr,Se]=Te("cell"),vr={tag:Oe("div"),icon:String,size:String,title:le,value:le,label:le,center:Boolean,isLink:Boolean,border:fe,iconPrefix:String,valueClass:Ce,labelClass:Ce,titleClass:Ce,titleStyle:null,arrowDirection:String,required:{type:[Boolean,String],default:null},clickable:{type:Boolean,default:null}},hr=De({},vr,Un);var yr=xe({name:dr,props:hr,setup(o,{slots:h}){const T=Wn(),E=()=>{if(h.label||Ne(o.label))return K("div",{class:[Se("label"),o.labelClass]},[h.label?h.label():o.label])},P=()=>{var A;if(h.title||Ne(o.title)){const C=(A=h.title)==null?void 0:A.call(h);return Array.isArray(C)&&C.length===0?void 0:K("div",{class:[Se("title"),o.titleClass],style:o.titleStyle},[C||K("span",null,[o.title]),E()])}},_=()=>{const A=h.value||h.default;if(A||Ne(o.value))return K("div",{class:[Se("value"),o.valueClass]},[A?A():K("span",null,[o.value])])},$=()=>{if(h.icon)return h.icon();if(o.icon)return K(Ue,{name:o.icon,class:Se("left-icon"),classPrefix:o.iconPrefix},null)},w=()=>{if(h["right-icon"])return h["right-icon"]();if(o.isLink){const A=o.arrowDirection&&o.arrowDirection!=="right"?`arrow-${o.arrowDirection}`:"arrow";return K(Ue,{name:A,class:Se("right-icon")},null)}};return()=>{var A;const{tag:C,size:z,center:c,border:x,isLink:N,required:Y}=o,G=(A=o.clickable)!=null?A:N,m={center:c,required:!!Y,clickable:G,borderless:!x};return z&&(m[z]=!!z),K(C,{class:Se(m),role:G?"button":void 0,tabindex:G?0:void 0,onClick:T},{default:()=>{var F;return[$(),P(),_(),w(),(F=h.extra)==null?void 0:F.call(h)]}})}}});const Cr=Ee(yr),[mr,Tt]=Te("cell-group"),gr={title:String,inset:Boolean,border:fe};var pr=xe({name:mr,inheritAttrs:!1,props:gr,setup(o,{slots:h,attrs:T}){const E=()=>{var _;return K("div",Fe({class:[Tt({inset:o.inset}),{[Hn]:o.border&&!o.inset}]},T,tt()),[(_=h.default)==null?void 0:_.call(h)])},P=()=>K("div",{class:Tt("title",{inset:o.inset})},[h.title?h.title():o.title]);return()=>o.title||h.title?K(zt,null,[P(),E()]):E()}});const Nr=Ee(pr),[br,he]=Te("nav-bar"),_r={title:String,fixed:Boolean,zIndex:le,border:fe,leftText:String,rightText:String,leftDisabled:Boolean,rightDisabled:Boolean,leftArrow:Boolean,placeholder:Boolean,safeAreaInsetTop:Boolean,clickable:fe};var wr=xe({name:br,props:_r,emits:["clickLeft","clickRight"],setup(o,{emit:h,slots:T}){const E=ae(),P=jn(E,he),_=z=>{o.leftDisabled||h("clickLeft",z)},$=z=>{o.rightDisabled||h("clickRight",z)},w=()=>T.left?T.left():[o.leftArrow&&K(Ue,{class:he("arrow"),name:"arrow-left"},null),o.leftText&&K("span",{class:he("text")},[o.leftText])],A=()=>T.right?T.right():K("span",{class:he("text")},[o.rightText]),C=()=>{const{title:z,fixed:c,border:x,zIndex:N}=o,Y=Mt(N),G=o.leftArrow||o.leftText||T.left,m=o.rightText||T.right;return K("div",{ref:E,style:Y,class:[he({fixed:c}),{[Vn]:x,"van-safe-area-top":o.safeAreaInsetTop}]},[K("div",{class:he("content")},[G&&K("div",{class:[he("left",{disabled:o.leftDisabled}),o.clickable&&!o.leftDisabled?et:""],onClick:_},[w()]),K("div",{class:[he("title"),"van-ellipsis"]},[T.title?T.title():z]),m&&K("div",{class:[he("right",{disabled:o.rightDisabled}),o.clickable&&!o.rightDisabled?et:""],onClick:$},[A()])])])};return()=>o.fixed&&o.placeholder?P(C):C()}});const Br=Ee(wr);var ke=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wt(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function ze(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Je={exports:{}};var xt;function Sr(){return xt||(xt=1,(function(o,h){(function(T){o.exports=T()})(function(){return(function T(E,P,_){function $(C,z){if(!P[C]){if(!E[C]){var c=typeof ze=="function"&&ze;if(!z&&c)return c(C,!0);if(w)return w(C,!0);var x=new Error("Cannot find module '"+C+"'");throw x.code="MODULE_NOT_FOUND",x}var N=P[C]={exports:{}};E[C][0].call(N.exports,function(Y){var G=E[C][1][Y];return $(G||Y)},N,N.exports,T,E,P,_)}return P[C].exports}for(var w=typeof ze=="function"&&ze,A=0;A<_.length;A++)$(_[A]);return $})({1:[function(T,E,P){(function(_){var $=_.MutationObserver||_.WebKitMutationObserver,w;if($){var A=0,C=new $(Y),z=_.document.createTextNode("");C.observe(z,{characterData:!0}),w=function(){z.data=A=++A%2}}else if(!_.setImmediate&&typeof _.MessageChannel<"u"){var c=new _.MessageChannel;c.port1.onmessage=Y,w=function(){c.port2.postMessage(0)}}else"document"in _&&"onreadystatechange"in _.document.createElement("script")?w=function(){var m=_.document.createElement("script");m.onreadystatechange=function(){Y(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},_.document.documentElement.appendChild(m)}:w=function(){setTimeout(Y,0)};var x,N=[];function Y(){x=!0;for(var m,F,B=N.length;B;){for(F=N,N=[],m=-1;++m<B;)F[m]();B=N.length}x=!1}E.exports=G;function G(m){N.push(m)===1&&!x&&w()}}).call(this,typeof ke<"u"?ke:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(T,E,P){var _=T(1);function $(){}var w={},A=["REJECTED"],C=["FULFILLED"],z=["PENDING"];E.exports=c;function c(l){if(typeof l!="function")throw new TypeError("resolver must be a function");this.state=z,this.queue=[],this.outcome=void 0,l!==$&&G(this,l)}c.prototype.catch=function(l){return this.then(null,l)},c.prototype.then=function(l,S){if(typeof l!="function"&&this.state===C||typeof S!="function"&&this.state===A)return this;var O=new this.constructor($);if(this.state!==z){var j=this.state===C?l:S;N(O,j,this.outcome)}else this.queue.push(new x(O,l,S));return O};function x(l,S,O){this.promise=l,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof O=="function"&&(this.onRejected=O,this.callRejected=this.otherCallRejected)}x.prototype.callFulfilled=function(l){w.resolve(this.promise,l)},x.prototype.otherCallFulfilled=function(l){N(this.promise,this.onFulfilled,l)},x.prototype.callRejected=function(l){w.reject(this.promise,l)},x.prototype.otherCallRejected=function(l){N(this.promise,this.onRejected,l)};function N(l,S,O){_(function(){var j;try{j=S(O)}catch(q){return w.reject(l,q)}j===l?w.reject(l,new TypeError("Cannot resolve promise with itself")):w.resolve(l,j)})}w.resolve=function(l,S){var O=m(Y,S);if(O.status==="error")return w.reject(l,O.value);var j=O.value;if(j)G(l,j);else{l.state=C,l.outcome=S;for(var q=-1,V=l.queue.length;++q<V;)l.queue[q].callFulfilled(S)}return l},w.reject=function(l,S){l.state=A,l.outcome=S;for(var O=-1,j=l.queue.length;++O<j;)l.queue[O].callRejected(S);return l};function Y(l){var S=l&&l.then;if(l&&(typeof l=="object"||typeof l=="function")&&typeof S=="function")return function(){S.apply(l,arguments)}}function G(l,S){var O=!1;function j(ee){O||(O=!0,w.reject(l,ee))}function q(ee){O||(O=!0,w.resolve(l,ee))}function V(){S(q,j)}var M=m(V);M.status==="error"&&j(M.value)}function m(l,S){var O={};try{O.value=l(S),O.status="success"}catch(j){O.status="error",O.value=j}return O}c.resolve=F;function F(l){return l instanceof this?l:w.resolve(new this($),l)}c.reject=B;function B(l){var S=new this($);return w.reject(S,l)}c.all=b;function b(l){var S=this;if(Object.prototype.toString.call(l)!=="[object Array]")return this.reject(new TypeError("must be an array"));var O=l.length,j=!1;if(!O)return this.resolve([]);for(var q=new Array(O),V=0,M=-1,ee=new this($);++M<O;)se(l[M],M);return ee;function se(R,g){S.resolve(R).then(y,function(I){j||(j=!0,w.reject(ee,I))});function y(I){q[g]=I,++V===O&&!j&&(j=!0,w.resolve(ee,q))}}}c.race=U;function U(l){var S=this;if(Object.prototype.toString.call(l)!=="[object Array]")return this.reject(new TypeError("must be an array"));var O=l.length,j=!1;if(!O)return this.resolve([]);for(var q=-1,V=new this($);++q<O;)M(l[q]);return V;function M(ee){S.resolve(ee).then(function(se){j||(j=!0,w.resolve(V,se))},function(se){j||(j=!0,w.reject(V,se))})}}},{1:1}],3:[function(T,E,P){(function(_){typeof _.Promise!="function"&&(_.Promise=T(2))}).call(this,typeof ke<"u"?ke:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(T,E,P){var _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function $(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function w(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var A=w();function C(){try{if(!A||!A.open)return!1;var e=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),n=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!e||n)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function z(e,n){e=e||[],n=n||{};try{return new Blob(e,n)}catch(r){if(r.name!=="TypeError")throw r;for(var t=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,a=new t,i=0;i<e.length;i+=1)a.append(e[i]);return a.getBlob(n.type)}}typeof Promise>"u"&&T(3);var c=Promise;function x(e,n){n&&e.then(function(t){n(null,t)},function(t){n(t)})}function N(e,n,t){typeof n=="function"&&e.then(n),typeof t=="function"&&e.catch(t)}function Y(e){return typeof e!="string"&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function G(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var m="local-forage-detect-blob-support",F=void 0,B={},b=Object.prototype.toString,U="readonly",l="readwrite";function S(e){for(var n=e.length,t=new ArrayBuffer(n),a=new Uint8Array(t),i=0;i<n;i++)a[i]=e.charCodeAt(i);return t}function O(e){return new c(function(n){var t=e.transaction(m,l),a=z([""]);t.objectStore(m).put(a,"key"),t.onabort=function(i){i.preventDefault(),i.stopPropagation(),n(!1)},t.oncomplete=function(){var i=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);n(r||!i||parseInt(i[1],10)>=43)}}).catch(function(){return!1})}function j(e){return typeof F=="boolean"?c.resolve(F):O(e).then(function(n){return F=n,F})}function q(e){var n=B[e.name],t={};t.promise=new c(function(a,i){t.resolve=a,t.reject=i}),n.deferredOperations.push(t),n.dbReady?n.dbReady=n.dbReady.then(function(){return t.promise}):n.dbReady=t.promise}function V(e){var n=B[e.name],t=n.deferredOperations.pop();if(t)return t.resolve(),t.promise}function M(e,n){var t=B[e.name],a=t.deferredOperations.pop();if(a)return a.reject(n),a.promise}function ee(e,n){return new c(function(t,a){if(B[e.name]=B[e.name]||Z(),e.db)if(n)q(e),e.db.close();else return t(e.db);var i=[e.name];n&&i.push(e.version);var r=A.open.apply(A,i);n&&(r.onupgradeneeded=function(s){var u=r.result;try{u.createObjectStore(e.storeName),s.oldVersion<=1&&u.createObjectStore(m)}catch(f){if(f.name==="ConstraintError")console.warn('The database "'+e.name+'" has been upgraded from version '+s.oldVersion+" to version "+s.newVersion+', but the storage "'+e.storeName+'" already exists.');else throw f}}),r.onerror=function(s){s.preventDefault(),a(r.error)},r.onsuccess=function(){var s=r.result;s.onversionchange=function(u){u.target.close()},t(s),V(e)}})}function se(e){return ee(e,!1)}function R(e){return ee(e,!0)}function g(e,n){if(!e.db)return!0;var t=!e.db.objectStoreNames.contains(e.storeName),a=e.version<e.db.version,i=e.version>e.db.version;if(a&&(e.version!==n&&console.warn('The database "'+e.name+`" can't be downgraded from version `+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||t){if(t){var r=e.db.version+1;r>e.version&&(e.version=r)}return!0}return!1}function y(e){return new c(function(n,t){var a=new FileReader;a.onerror=t,a.onloadend=function(i){var r=btoa(i.target.result||"");n({__local_forage_encoded_blob:!0,data:r,type:e.type})},a.readAsBinaryString(e)})}function I(e){var n=S(atob(e.data));return z([n],{type:e.type})}function p(e){return e&&e.__local_forage_encoded_blob}function L(e){var n=this,t=n._initReady().then(function(){var a=B[n._dbInfo.name];if(a&&a.dbReady)return a.dbReady});return N(t,e,e),t}function k(e){q(e);for(var n=B[e.name],t=n.forages,a=0;a<t.length;a++){var i=t[a];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,se(e).then(function(r){return e.db=r,g(e)?R(e):r}).then(function(r){e.db=n.db=r;for(var s=0;s<t.length;s++)t[s]._dbInfo.db=r}).catch(function(r){throw M(e,r),r})}function H(e,n,t,a){a===void 0&&(a=1);try{var i=e.db.transaction(e.storeName,n);t(null,i)}catch(r){if(a>0&&(!e.db||r.name==="InvalidStateError"||r.name==="NotFoundError"))return c.resolve().then(function(){if(!e.db||r.name==="NotFoundError"&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),R(e)}).then(function(){return k(e).then(function(){H(e,n,t,a-1)})}).catch(t);t(r)}}function Z(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function te(e){var n=this,t={db:null};if(e)for(var a in e)t[a]=e[a];var i=B[t.name];i||(i=Z(),B[t.name]=i),i.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=L);var r=[];function s(){return c.resolve()}for(var u=0;u<i.forages.length;u++){var f=i.forages[u];f!==n&&r.push(f._initReady().catch(s))}var d=i.forages.slice(0);return c.all(r).then(function(){return t.db=i.db,se(t)}).then(function(v){return t.db=v,g(t,n._defaultConfig.version)?R(t):v}).then(function(v){t.db=i.db=v,n._dbInfo=t;for(var D=0;D<d.length;D++){var W=d[D];W!==n&&(W._dbInfo.db=t.db,W._dbInfo.version=t.version)}})}function re(e,n){var t=this;e=Y(e);var a=new c(function(i,r){t.ready().then(function(){H(t._dbInfo,U,function(s,u){if(s)return r(s);try{var f=u.objectStore(t._dbInfo.storeName),d=f.get(e);d.onsuccess=function(){var v=d.result;v===void 0&&(v=null),p(v)&&(v=I(v)),i(v)},d.onerror=function(){r(d.error)}}catch(v){r(v)}})}).catch(r)});return x(a,n),a}function ie(e,n){var t=this,a=new c(function(i,r){t.ready().then(function(){H(t._dbInfo,U,function(s,u){if(s)return r(s);try{var f=u.objectStore(t._dbInfo.storeName),d=f.openCursor(),v=1;d.onsuccess=function(){var D=d.result;if(D){var W=D.value;p(W)&&(W=I(W));var X=e(W,D.key,v++);X!==void 0?i(X):D.continue()}else i()},d.onerror=function(){r(d.error)}}catch(D){r(D)}})}).catch(r)});return x(a,n),a}function ye(e,n,t){var a=this;e=Y(e);var i=new c(function(r,s){var u;a.ready().then(function(){return u=a._dbInfo,b.call(n)==="[object Blob]"?j(u.db).then(function(f){return f?n:y(n)}):n}).then(function(f){H(a._dbInfo,l,function(d,v){if(d)return s(d);try{var D=v.objectStore(a._dbInfo.storeName);f===null&&(f=void 0);var W=D.put(f,e);v.oncomplete=function(){f===void 0&&(f=null),r(f)},v.onabort=v.onerror=function(){var X=W.error?W.error:W.transaction.error;s(X)}}catch(X){s(X)}})}).catch(s)});return x(i,t),i}function de(e,n){var t=this;e=Y(e);var a=new c(function(i,r){t.ready().then(function(){H(t._dbInfo,l,function(s,u){if(s)return r(s);try{var f=u.objectStore(t._dbInfo.storeName),d=f.delete(e);u.oncomplete=function(){i()},u.onerror=function(){r(d.error)},u.onabort=function(){var v=d.error?d.error:d.transaction.error;r(v)}}catch(v){r(v)}})}).catch(r)});return x(a,n),a}function pe(e){var n=this,t=new c(function(a,i){n.ready().then(function(){H(n._dbInfo,l,function(r,s){if(r)return i(r);try{var u=s.objectStore(n._dbInfo.storeName),f=u.clear();s.oncomplete=function(){a()},s.onabort=s.onerror=function(){var d=f.error?f.error:f.transaction.error;i(d)}}catch(d){i(d)}})}).catch(i)});return x(t,e),t}function ve(e){var n=this,t=new c(function(a,i){n.ready().then(function(){H(n._dbInfo,U,function(r,s){if(r)return i(r);try{var u=s.objectStore(n._dbInfo.storeName),f=u.count();f.onsuccess=function(){a(f.result)},f.onerror=function(){i(f.error)}}catch(d){i(d)}})}).catch(i)});return x(t,e),t}function oe(e,n){var t=this,a=new c(function(i,r){if(e<0){i(null);return}t.ready().then(function(){H(t._dbInfo,U,function(s,u){if(s)return r(s);try{var f=u.objectStore(t._dbInfo.storeName),d=!1,v=f.openKeyCursor();v.onsuccess=function(){var D=v.result;if(!D){i(null);return}e===0||d?i(D.key):(d=!0,D.advance(e))},v.onerror=function(){r(v.error)}}catch(D){r(D)}})}).catch(r)});return x(a,n),a}function ce(e){var n=this,t=new c(function(a,i){n.ready().then(function(){H(n._dbInfo,U,function(r,s){if(r)return i(r);try{var u=s.objectStore(n._dbInfo.storeName),f=u.openKeyCursor(),d=[];f.onsuccess=function(){var v=f.result;if(!v){a(d);return}d.push(v.key),v.continue()},f.onerror=function(){i(f.error)}}catch(v){i(v)}})}).catch(i)});return x(t,e),t}function be(e,n){n=G.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var a=this,i;if(!e.name)i=c.reject("Invalid arguments");else{var r=e.name===t.name&&a._dbInfo.db,s=r?c.resolve(a._dbInfo.db):se(e).then(function(u){var f=B[e.name],d=f.forages;f.db=u;for(var v=0;v<d.length;v++)d[v]._dbInfo.db=u;return u});e.storeName?i=s.then(function(u){if(u.objectStoreNames.contains(e.storeName)){var f=u.version+1;q(e);var d=B[e.name],v=d.forages;u.close();for(var D=0;D<v.length;D++){var W=v[D];W._dbInfo.db=null,W._dbInfo.version=f}var X=new c(function(Q,ne){var J=A.open(e.name,f);J.onerror=function(ue){var Re=J.result;Re.close(),ne(ue)},J.onupgradeneeded=function(){var ue=J.result;ue.deleteObjectStore(e.storeName)},J.onsuccess=function(){var ue=J.result;ue.close(),Q(ue)}});return X.then(function(Q){d.db=Q;for(var ne=0;ne<v.length;ne++){var J=v[ne];J._dbInfo.db=Q,V(J._dbInfo)}}).catch(function(Q){throw(M(e,Q)||c.resolve()).catch(function(){}),Q})}}):i=s.then(function(u){q(e);var f=B[e.name],d=f.forages;u.close();for(var v=0;v<d.length;v++){var D=d[v];D._dbInfo.db=null}var W=new c(function(X,Q){var ne=A.deleteDatabase(e.name);ne.onerror=function(){var J=ne.result;J&&J.close(),Q(ne.error)},ne.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},ne.onsuccess=function(){var J=ne.result;J&&J.close(),X(J)}});return W.then(function(X){f.db=X;for(var Q=0;Q<d.length;Q++){var ne=d[Q];V(ne._dbInfo)}}).catch(function(X){throw(M(e,X)||c.resolve()).catch(function(){}),X})})}return x(i,n),i}var _e={_driver:"asyncStorage",_initStorage:te,_support:C(),iterate:ie,getItem:re,setItem:ye,removeItem:de,clear:pe,length:ve,key:oe,keys:ce,dropInstance:be};function Ht(){return typeof openDatabase=="function"}var me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jt="~~local_forage_type~",rt=/^~~local_forage_type~([^~]+)~/,Me="__lfsc__:",He=Me.length,je="arbf",Ve="blob",at="si08",ot="ui08",it="uic8",st="si16",ut="si32",ct="ur16",ft="ui32",lt="fl32",dt="fl64",vt=He+je.length,ht=Object.prototype.toString;function yt(e){var n=e.length*.75,t=e.length,a,i=0,r,s,u,f;e[e.length-1]==="="&&(n--,e[e.length-2]==="="&&n--);var d=new ArrayBuffer(n),v=new Uint8Array(d);for(a=0;a<t;a+=4)r=me.indexOf(e[a]),s=me.indexOf(e[a+1]),u=me.indexOf(e[a+2]),f=me.indexOf(e[a+3]),v[i++]=r<<2|s>>4,v[i++]=(s&15)<<4|u>>2,v[i++]=(u&3)<<6|f&63;return d}function Ke(e){var n=new Uint8Array(e),t="",a;for(a=0;a<n.length;a+=3)t+=me[n[a]>>2],t+=me[(n[a]&3)<<4|n[a+1]>>4],t+=me[(n[a+1]&15)<<2|n[a+2]>>6],t+=me[n[a+2]&63];return n.length%3===2?t=t.substring(0,t.length-1)+"=":n.length%3===1&&(t=t.substring(0,t.length-2)+"=="),t}function Vt(e,n){var t="";if(e&&(t=ht.call(e)),e&&(t==="[object ArrayBuffer]"||e.buffer&&ht.call(e.buffer)==="[object ArrayBuffer]")){var a,i=Me;e instanceof ArrayBuffer?(a=e,i+=je):(a=e.buffer,t==="[object Int8Array]"?i+=at:t==="[object Uint8Array]"?i+=ot:t==="[object Uint8ClampedArray]"?i+=it:t==="[object Int16Array]"?i+=st:t==="[object Uint16Array]"?i+=ct:t==="[object Int32Array]"?i+=ut:t==="[object Uint32Array]"?i+=ft:t==="[object Float32Array]"?i+=lt:t==="[object Float64Array]"?i+=dt:n(new Error("Failed to get type for BinaryArray"))),n(i+Ke(a))}else if(t==="[object Blob]"){var r=new FileReader;r.onload=function(){var s=jt+e.type+"~"+Ke(this.result);n(Me+Ve+s)},r.readAsArrayBuffer(e)}else try{n(JSON.stringify(e))}catch(s){console.error("Couldn't convert value into a JSON string: ",e),n(null,s)}}function Kt(e){if(e.substring(0,He)!==Me)return JSON.parse(e);var n=e.substring(vt),t=e.substring(He,vt),a;if(t===Ve&&rt.test(n)){var i=n.match(rt);a=i[1],n=n.substring(i[0].length)}var r=yt(n);switch(t){case je:return r;case Ve:return z([r],{type:a});case at:return new Int8Array(r);case ot:return new Uint8Array(r);case it:return new Uint8ClampedArray(r);case st:return new Int16Array(r);case ct:return new Uint16Array(r);case ut:return new Int32Array(r);case ft:return new Uint32Array(r);case lt:return new Float32Array(r);case dt:return new Float64Array(r);default:throw new Error("Unkown type: "+t)}}var Ge={serialize:Vt,deserialize:Kt,stringToBuffer:yt,bufferToString:Ke};function mt(e,n,t,a){e.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],t,a)}function Gt(e){var n=this,t={db:null};if(e)for(var a in e)t[a]=typeof e[a]!="string"?e[a].toString():e[a];var i=new c(function(r,s){try{t.db=openDatabase(t.name,String(t.version),t.description,t.size)}catch(u){return s(u)}t.db.transaction(function(u){mt(u,t,function(){n._dbInfo=t,r()},function(f,d){s(d)})},s)});return t.serializer=Ge,i}function ge(e,n,t,a,i,r){e.executeSql(t,a,i,function(s,u){u.code===u.SYNTAX_ERR?s.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[n.storeName],function(f,d){d.rows.length?r(f,u):mt(f,n,function(){f.executeSql(t,a,i,r)},r)},r):r(s,u)},r)}function Xt(e,n){var t=this;e=Y(e);var a=new c(function(i,r){t.ready().then(function(){var s=t._dbInfo;s.db.transaction(function(u){ge(u,s,"SELECT * FROM "+s.storeName+" WHERE key = ? LIMIT 1",[e],function(f,d){var v=d.rows.length?d.rows.item(0).value:null;v&&(v=s.serializer.deserialize(v)),i(v)},function(f,d){r(d)})})}).catch(r)});return x(a,n),a}function Qt(e,n){var t=this,a=new c(function(i,r){t.ready().then(function(){var s=t._dbInfo;s.db.transaction(function(u){ge(u,s,"SELECT * FROM "+s.storeName,[],function(f,d){for(var v=d.rows,D=v.length,W=0;W<D;W++){var X=v.item(W),Q=X.value;if(Q&&(Q=s.serializer.deserialize(Q)),Q=e(Q,X.key,W+1),Q!==void 0){i(Q);return}}i()},function(f,d){r(d)})})}).catch(r)});return x(a,n),a}function gt(e,n,t,a){var i=this;e=Y(e);var r=new c(function(s,u){i.ready().then(function(){n===void 0&&(n=null);var f=n,d=i._dbInfo;d.serializer.serialize(n,function(v,D){D?u(D):d.db.transaction(function(W){ge(W,d,"INSERT OR REPLACE INTO "+d.storeName+" (key, value) VALUES (?, ?)",[e,v],function(){s(f)},function(X,Q){u(Q)})},function(W){if(W.code===W.QUOTA_ERR){if(a>0){s(gt.apply(i,[e,f,t,a-1]));return}u(W)}})})}).catch(u)});return x(r,t),r}function qt(e,n,t){return gt.apply(this,[e,n,t,1])}function Zt(e,n){var t=this;e=Y(e);var a=new c(function(i,r){t.ready().then(function(){var s=t._dbInfo;s.db.transaction(function(u){ge(u,s,"DELETE FROM "+s.storeName+" WHERE key = ?",[e],function(){i()},function(f,d){r(d)})})}).catch(r)});return x(a,n),a}function Jt(e){var n=this,t=new c(function(a,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(s){ge(s,r,"DELETE FROM "+r.storeName,[],function(){a()},function(u,f){i(f)})})}).catch(i)});return x(t,e),t}function en(e){var n=this,t=new c(function(a,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(s){ge(s,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],function(u,f){var d=f.rows.item(0).c;a(d)},function(u,f){i(f)})})}).catch(i)});return x(t,e),t}function tn(e,n){var t=this,a=new c(function(i,r){t.ready().then(function(){var s=t._dbInfo;s.db.transaction(function(u){ge(u,s,"SELECT key FROM "+s.storeName+" WHERE id = ? LIMIT 1",[e+1],function(f,d){var v=d.rows.length?d.rows.item(0).key:null;i(v)},function(f,d){r(d)})})}).catch(r)});return x(a,n),a}function nn(e){var n=this,t=new c(function(a,i){n.ready().then(function(){var r=n._dbInfo;r.db.transaction(function(s){ge(s,r,"SELECT key FROM "+r.storeName,[],function(u,f){for(var d=[],v=0;v<f.rows.length;v++)d.push(f.rows.item(v).key);a(d)},function(u,f){i(f)})})}).catch(i)});return x(t,e),t}function rn(e){return new c(function(n,t){e.transaction(function(a){a.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(i,r){for(var s=[],u=0;u<r.rows.length;u++)s.push(r.rows.item(u).name);n({db:e,storeNames:s})},function(i,r){t(r)})},function(a){t(a)})})}function an(e,n){n=G.apply(this,arguments);var t=this.config();e=typeof e!="function"&&e||{},e.name||(e.name=e.name||t.name,e.storeName=e.storeName||t.storeName);var a=this,i;return e.name?i=new c(function(r){var s;e.name===t.name?s=a._dbInfo.db:s=openDatabase(e.name,"","",0),e.storeName?r({db:s,storeNames:[e.storeName]}):r(rn(s))}).then(function(r){return new c(function(s,u){r.db.transaction(function(f){function d(X){return new c(function(Q,ne){f.executeSql("DROP TABLE IF EXISTS "+X,[],function(){Q()},function(J,ue){ne(ue)})})}for(var v=[],D=0,W=r.storeNames.length;D<W;D++)v.push(d(r.storeNames[D]));c.all(v).then(function(){s()}).catch(function(X){u(X)})},function(f){u(f)})})}):i=c.reject("Invalid arguments"),x(i,n),i}var on={_driver:"webSQLStorage",_initStorage:Gt,_support:Ht(),iterate:Qt,getItem:Xt,setItem:qt,removeItem:Zt,clear:Jt,length:en,key:tn,keys:nn,dropInstance:an};function sn(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function pt(e,n){var t=e.name+"/";return e.storeName!==n.storeName&&(t+=e.storeName+"/"),t}function un(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch{return!0}}function cn(){return!un()||localStorage.length>0}function fn(e){var n=this,t={};if(e)for(var a in e)t[a]=e[a];return t.keyPrefix=pt(e,n._defaultConfig),cn()?(n._dbInfo=t,t.serializer=Ge,c.resolve()):c.reject()}function ln(e){var n=this,t=n.ready().then(function(){for(var a=n._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var r=localStorage.key(i);r.indexOf(a)===0&&localStorage.removeItem(r)}});return x(t,e),t}function dn(e,n){var t=this;e=Y(e);var a=t.ready().then(function(){var i=t._dbInfo,r=localStorage.getItem(i.keyPrefix+e);return r&&(r=i.serializer.deserialize(r)),r});return x(a,n),a}function vn(e,n){var t=this,a=t.ready().then(function(){for(var i=t._dbInfo,r=i.keyPrefix,s=r.length,u=localStorage.length,f=1,d=0;d<u;d++){var v=localStorage.key(d);if(v.indexOf(r)===0){var D=localStorage.getItem(v);if(D&&(D=i.serializer.deserialize(D)),D=e(D,v.substring(s),f++),D!==void 0)return D}}});return x(a,n),a}function hn(e,n){var t=this,a=t.ready().then(function(){var i=t._dbInfo,r;try{r=localStorage.key(e)}catch{r=null}return r&&(r=r.substring(i.keyPrefix.length)),r});return x(a,n),a}function yn(e){var n=this,t=n.ready().then(function(){for(var a=n._dbInfo,i=localStorage.length,r=[],s=0;s<i;s++){var u=localStorage.key(s);u.indexOf(a.keyPrefix)===0&&r.push(u.substring(a.keyPrefix.length))}return r});return x(t,e),t}function mn(e){var n=this,t=n.keys().then(function(a){return a.length});return x(t,e),t}function gn(e,n){var t=this;e=Y(e);var a=t.ready().then(function(){var i=t._dbInfo;localStorage.removeItem(i.keyPrefix+e)});return x(a,n),a}function pn(e,n,t){var a=this;e=Y(e);var i=a.ready().then(function(){n===void 0&&(n=null);var r=n;return new c(function(s,u){var f=a._dbInfo;f.serializer.serialize(n,function(d,v){if(v)u(v);else try{localStorage.setItem(f.keyPrefix+e,d),s(r)}catch(D){(D.name==="QuotaExceededError"||D.name==="NS_ERROR_DOM_QUOTA_REACHED")&&u(D),u(D)}})})});return x(i,t),i}function bn(e,n){if(n=G.apply(this,arguments),e=typeof e!="function"&&e||{},!e.name){var t=this.config();e.name=e.name||t.name,e.storeName=e.storeName||t.storeName}var a=this,i;return e.name?i=new c(function(r){e.storeName?r(pt(e,a._defaultConfig)):r(e.name+"/")}).then(function(r){for(var s=localStorage.length-1;s>=0;s--){var u=localStorage.key(s);u.indexOf(r)===0&&localStorage.removeItem(u)}}):i=c.reject("Invalid arguments"),x(i,n),i}var _n={_driver:"localStorageWrapper",_initStorage:fn,_support:sn(),iterate:vn,getItem:dn,setItem:pn,removeItem:gn,clear:ln,length:mn,key:hn,keys:yn,dropInstance:bn},wn=function(n,t){return n===t||typeof n=="number"&&typeof t=="number"&&isNaN(n)&&isNaN(t)},Sn=function(n,t){for(var a=n.length,i=0;i<a;){if(wn(n[i],t))return!0;i++}return!1},bt=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},Ae={},_t={},we={INDEXEDDB:_e,WEBSQL:on,LOCALSTORAGE:_n},In=[we.INDEXEDDB._driver,we.WEBSQL._driver,we.LOCALSTORAGE._driver],Le=["dropInstance"],Xe=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Le),Dn={description:"",driver:In.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Tn(e,n){e[n]=function(){var t=arguments;return e.ready().then(function(){return e[n].apply(e,t)})}}function Qe(){for(var e=1;e<arguments.length;e++){var n=arguments[e];if(n)for(var t in n)n.hasOwnProperty(t)&&(bt(n[t])?arguments[0][t]=n[t].slice():arguments[0][t]=n[t])}return arguments[0]}var xn=(function(){function e(n){$(this,e);for(var t in we)if(we.hasOwnProperty(t)){var a=we[t],i=a._driver;this[t]=i,Ae[i]||this.defineDriver(a)}this._defaultConfig=Qe({},Dn),this._config=Qe({},this._defaultConfig,n),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return e.prototype.config=function(t){if((typeof t>"u"?"undefined":_(t))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var a in t){if(a==="storeName"&&(t[a]=t[a].replace(/\W/g,"_")),a==="version"&&typeof t[a]!="number")return new Error("Database version must be a number.");this._config[a]=t[a]}return"driver"in t&&t.driver?this.setDriver(this._config.driver):!0}else return typeof t=="string"?this._config[t]:this._config},e.prototype.defineDriver=function(t,a,i){var r=new c(function(s,u){try{var f=t._driver,d=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver){u(d);return}for(var v=Xe.concat("_initStorage"),D=0,W=v.length;D<W;D++){var X=v[D],Q=!Sn(Le,X);if((Q||t[X])&&typeof t[X]!="function"){u(d);return}}var ne=function(){for(var Re=function(Rn){return function(){var $n=new Error("Method "+Rn+" is not implemented by the current driver"),wt=c.reject($n);return x(wt,arguments[arguments.length-1]),wt}},qe=0,An=Le.length;qe<An;qe++){var Ze=Le[qe];t[Ze]||(t[Ze]=Re(Ze))}};ne();var J=function(Re){Ae[f]&&console.info("Redefining LocalForage driver: "+f),Ae[f]=t,_t[f]=Re,s()};"_support"in t?t._support&&typeof t._support=="function"?t._support().then(J,u):J(!!t._support):J(!0)}catch(ue){u(ue)}});return N(r,a,i),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(t,a,i){var r=Ae[t]?c.resolve(Ae[t]):c.reject(new Error("Driver not found."));return N(r,a,i),r},e.prototype.getSerializer=function(t){var a=c.resolve(Ge);return N(a,t),a},e.prototype.ready=function(t){var a=this,i=a._driverSet.then(function(){return a._ready===null&&(a._ready=a._initDriver()),a._ready});return N(i,t,t),i},e.prototype.setDriver=function(t,a,i){var r=this;bt(t)||(t=[t]);var s=this._getSupportedDrivers(t);function u(){r._config.driver=r.driver()}function f(D){return r._extend(D),u(),r._ready=r._initStorage(r._config),r._ready}function d(D){return function(){var W=0;function X(){for(;W<D.length;){var Q=D[W];return W++,r._dbInfo=null,r._ready=null,r.getDriver(Q).then(f).catch(X)}u();var ne=new Error("No available storage method found.");return r._driverSet=c.reject(ne),r._driverSet}return X()}}var v=this._driverSet!==null?this._driverSet.catch(function(){return c.resolve()}):c.resolve();return this._driverSet=v.then(function(){var D=s[0];return r._dbInfo=null,r._ready=null,r.getDriver(D).then(function(W){r._driver=W._driver,u(),r._wrapLibraryMethodsWithReady(),r._initDriver=d(s)})}).catch(function(){u();var D=new Error("No available storage method found.");return r._driverSet=c.reject(D),r._driverSet}),N(this._driverSet,a,i),this._driverSet},e.prototype.supports=function(t){return!!_t[t]},e.prototype._extend=function(t){Qe(this,t)},e.prototype._getSupportedDrivers=function(t){for(var a=[],i=0,r=t.length;i<r;i++){var s=t[i];this.supports(s)&&a.push(s)}return a},e.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,a=Xe.length;t<a;t++)Tn(this,Xe[t])},e.prototype.createInstance=function(t){return new e(t)},e})(),En=new xn;E.exports=En},{3:3}]},{},[4])(4)})})(Je)),Je.exports}var Ir=Sr();const We=Wt(Ir);We.config({name:"MoneyTracker",storeName:"money_tracker_db",description:"记账应用数据存储"});const Et=We.createInstance({name:"MoneyTracker",storeName:"records"}),At=We.createInstance({name:"MoneyTracker",storeName:"tags"});We.createInstance({name:"MoneyTracker",storeName:"settings"});var Ye={exports:{}},Dr=Ye.exports,Rt;function Tr(){return Rt||(Rt=1,(function(o,h){(function(T,E){o.exports=E()})(Dr,(function(){var T=1e3,E=6e4,P=36e5,_="millisecond",$="second",w="minute",A="hour",C="day",z="week",c="month",x="quarter",N="year",Y="date",G="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,F=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,B={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(R){var g=["th","st","nd","rd"],y=R%100;return"["+R+(g[(y-20)%10]||g[y]||g[0])+"]"}},b=function(R,g,y){var I=String(R);return!I||I.length>=g?R:""+Array(g+1-I.length).join(y)+R},U={s:b,z:function(R){var g=-R.utcOffset(),y=Math.abs(g),I=Math.floor(y/60),p=y%60;return(g<=0?"+":"-")+b(I,2,"0")+":"+b(p,2,"0")},m:function R(g,y){if(g.date()<y.date())return-R(y,g);var I=12*(y.year()-g.year())+(y.month()-g.month()),p=g.clone().add(I,c),L=y-p<0,k=g.clone().add(I+(L?-1:1),c);return+(-(I+(y-p)/(L?p-k:k-p))||0)},a:function(R){return R<0?Math.ceil(R)||0:Math.floor(R)},p:function(R){return{M:c,y:N,w:z,d:C,D:Y,h:A,m:w,s:$,ms:_,Q:x}[R]||String(R||"").toLowerCase().replace(/s$/,"")},u:function(R){return R===void 0}},l="en",S={};S[l]=B;var O="$isDayjsObject",j=function(R){return R instanceof ee||!(!R||!R[O])},q=function R(g,y,I){var p;if(!g)return l;if(typeof g=="string"){var L=g.toLowerCase();S[L]&&(p=L),y&&(S[L]=y,p=L);var k=g.split("-");if(!p&&k.length>1)return R(k[0])}else{var H=g.name;S[H]=g,p=H}return!I&&p&&(l=p),p||!I&&l},V=function(R,g){if(j(R))return R.clone();var y=typeof g=="object"?g:{};return y.date=R,y.args=arguments,new ee(y)},M=U;M.l=q,M.i=j,M.w=function(R,g){return V(R,{locale:g.$L,utc:g.$u,x:g.$x,$offset:g.$offset})};var ee=(function(){function R(y){this.$L=q(y.locale,null,!0),this.parse(y),this.$x=this.$x||y.x||{},this[O]=!0}var g=R.prototype;return g.parse=function(y){this.$d=(function(I){var p=I.date,L=I.utc;if(p===null)return new Date(NaN);if(M.u(p))return new Date;if(p instanceof Date)return new Date(p);if(typeof p=="string"&&!/Z$/i.test(p)){var k=p.match(m);if(k){var H=k[2]-1||0,Z=(k[7]||"0").substring(0,3);return L?new Date(Date.UTC(k[1],H,k[3]||1,k[4]||0,k[5]||0,k[6]||0,Z)):new Date(k[1],H,k[3]||1,k[4]||0,k[5]||0,k[6]||0,Z)}}return new Date(p)})(y),this.init()},g.init=function(){var y=this.$d;this.$y=y.getFullYear(),this.$M=y.getMonth(),this.$D=y.getDate(),this.$W=y.getDay(),this.$H=y.getHours(),this.$m=y.getMinutes(),this.$s=y.getSeconds(),this.$ms=y.getMilliseconds()},g.$utils=function(){return M},g.isValid=function(){return this.$d.toString()!==G},g.isSame=function(y,I){var p=V(y);return this.startOf(I)<=p&&p<=this.endOf(I)},g.isAfter=function(y,I){return V(y)<this.startOf(I)},g.isBefore=function(y,I){return this.endOf(I)<V(y)},g.$g=function(y,I,p){return M.u(y)?this[I]:this.set(p,y)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(y,I){var p=this,L=!!M.u(I)||I,k=M.p(y),H=function(ve,oe){var ce=M.w(p.$u?Date.UTC(p.$y,oe,ve):new Date(p.$y,oe,ve),p);return L?ce:ce.endOf(C)},Z=function(ve,oe){return M.w(p.toDate()[ve].apply(p.toDate("s"),(L?[0,0,0,0]:[23,59,59,999]).slice(oe)),p)},te=this.$W,re=this.$M,ie=this.$D,ye="set"+(this.$u?"UTC":"");switch(k){case N:return L?H(1,0):H(31,11);case c:return L?H(1,re):H(0,re+1);case z:var de=this.$locale().weekStart||0,pe=(te<de?te+7:te)-de;return H(L?ie-pe:ie+(6-pe),re);case C:case Y:return Z(ye+"Hours",0);case A:return Z(ye+"Minutes",1);case w:return Z(ye+"Seconds",2);case $:return Z(ye+"Milliseconds",3);default:return this.clone()}},g.endOf=function(y){return this.startOf(y,!1)},g.$set=function(y,I){var p,L=M.p(y),k="set"+(this.$u?"UTC":""),H=(p={},p[C]=k+"Date",p[Y]=k+"Date",p[c]=k+"Month",p[N]=k+"FullYear",p[A]=k+"Hours",p[w]=k+"Minutes",p[$]=k+"Seconds",p[_]=k+"Milliseconds",p)[L],Z=L===C?this.$D+(I-this.$W):I;if(L===c||L===N){var te=this.clone().set(Y,1);te.$d[H](Z),te.init(),this.$d=te.set(Y,Math.min(this.$D,te.daysInMonth())).$d}else H&&this.$d[H](Z);return this.init(),this},g.set=function(y,I){return this.clone().$set(y,I)},g.get=function(y){return this[M.p(y)]()},g.add=function(y,I){var p,L=this;y=Number(y);var k=M.p(I),H=function(re){var ie=V(L);return M.w(ie.date(ie.date()+Math.round(re*y)),L)};if(k===c)return this.set(c,this.$M+y);if(k===N)return this.set(N,this.$y+y);if(k===C)return H(1);if(k===z)return H(7);var Z=(p={},p[w]=E,p[A]=P,p[$]=T,p)[k]||1,te=this.$d.getTime()+y*Z;return M.w(te,this)},g.subtract=function(y,I){return this.add(-1*y,I)},g.format=function(y){var I=this,p=this.$locale();if(!this.isValid())return p.invalidDate||G;var L=y||"YYYY-MM-DDTHH:mm:ssZ",k=M.z(this),H=this.$H,Z=this.$m,te=this.$M,re=p.weekdays,ie=p.months,ye=p.meridiem,de=function(oe,ce,be,_e){return oe&&(oe[ce]||oe(I,L))||be[ce].slice(0,_e)},pe=function(oe){return M.s(H%12||12,oe,"0")},ve=ye||function(oe,ce,be){var _e=oe<12?"AM":"PM";return be?_e.toLowerCase():_e};return L.replace(F,(function(oe,ce){return ce||(function(be){switch(be){case"YY":return String(I.$y).slice(-2);case"YYYY":return M.s(I.$y,4,"0");case"M":return te+1;case"MM":return M.s(te+1,2,"0");case"MMM":return de(p.monthsShort,te,ie,3);case"MMMM":return de(ie,te);case"D":return I.$D;case"DD":return M.s(I.$D,2,"0");case"d":return String(I.$W);case"dd":return de(p.weekdaysMin,I.$W,re,2);case"ddd":return de(p.weekdaysShort,I.$W,re,3);case"dddd":return re[I.$W];case"H":return String(H);case"HH":return M.s(H,2,"0");case"h":return pe(1);case"hh":return pe(2);case"a":return ve(H,Z,!0);case"A":return ve(H,Z,!1);case"m":return String(Z);case"mm":return M.s(Z,2,"0");case"s":return String(I.$s);case"ss":return M.s(I.$s,2,"0");case"SSS":return M.s(I.$ms,3,"0");case"Z":return k}return null})(oe)||k.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(y,I,p){var L,k=this,H=M.p(I),Z=V(y),te=(Z.utcOffset()-this.utcOffset())*E,re=this-Z,ie=function(){return M.m(k,Z)};switch(H){case N:L=ie()/12;break;case c:L=ie();break;case x:L=ie()/3;break;case z:L=(re-te)/6048e5;break;case C:L=(re-te)/864e5;break;case A:L=re/P;break;case w:L=re/E;break;case $:L=re/T;break;default:L=re}return p?L:M.a(L)},g.daysInMonth=function(){return this.endOf(c).$D},g.$locale=function(){return S[this.$L]},g.locale=function(y,I){if(!y)return this.$L;var p=this.clone(),L=q(y,I,!0);return L&&(p.$L=L),p},g.clone=function(){return M.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},R})(),se=ee.prototype;return V.prototype=se,[["$ms",_],["$s",$],["$m",w],["$H",A],["$W",C],["$M",c],["$y",N],["$D",Y]].forEach((function(R){se[R[1]]=function(g){return this.$g(g,R[0],R[1])}})),V.extend=function(R,g){return R.$i||(R(g,ee,V),R.$i=!0),V},V.locale=q,V.isDayjs=j,V.unix=function(R){return V(1e3*R)},V.en=S[l],V.Ls=S,V.p={},V}))})(Ye)),Ye.exports}var xr=Tr();const Ie=Wt(xr),Pr=Yt("records",()=>{const o=ae([]),h=ae(!1),T=async()=>{h.value=!0;try{const m=await Et.getItem("records");m&&Array.isArray(m)&&(o.value=m.sort((F,B)=>new Date(B.date).getTime()-new Date(F.date).getTime()))}catch(m){console.error("加载记账数据失败:",m)}finally{h.value=!1}},E=async()=>{try{await Et.setItem("records",o.value)}catch(m){console.error("保存记账数据失败:",m)}},P=()=>Date.now().toString(36)+Math.random().toString(36).substr(2,9),_=async m=>{const F={id:P(),amount:Number(m.amount),type:m.type,date:m.date||Ie().format("YYYY-MM-DD"),tagIds:m.tagIds||[],note:m.note||"",createTime:new Date().toISOString()};return o.value.unshift(F),o.value.sort((B,b)=>new Date(b.date).getTime()-new Date(B.date).getTime()),await E(),F},$=async(m,F)=>{const B=o.value.findIndex(b=>b.id===m);return B!==-1?(o.value[B]={...o.value[B],...F,updateTime:new Date().toISOString()},o.value.sort((b,U)=>new Date(U.date).getTime()-new Date(b.date).getTime()),await E(),o.value[B]):null},w=async m=>{const F=o.value.findIndex(B=>B.id===m);return F!==-1?(o.value.splice(F,1),await E(),!0):!1},A=m=>o.value.find(F=>F.id===m),C=(m,F)=>o.value.filter(B=>{const b=Ie(B.date);return b.year()===m&&b.month()+1===F}),z=(m,F)=>o.value.filter(B=>{const b=Ie(B.date);return b.isAfter(Ie(m).subtract(1,"day"))&&b.isBefore(Ie(F).add(1,"day"))}),c=Pe(()=>{const m=new Set;return o.value.forEach(F=>{const B=Ie(F.date);m.add(`${B.year()}-${String(B.month()+1).padStart(2,"0")}`)}),Array.from(m).sort().reverse()});return{records:o,loading:h,init:T,addRecord:_,updateRecord:$,deleteRecord:w,getRecord:A,getRecordsByMonth:C,getRecordsByDateRange:z,availableMonths:c,getStatistics:(m=o.value)=>{const F=m.filter(b=>b.type==="expense").reduce((b,U)=>b+U.amount,0),B=m.filter(b=>b.type==="income").reduce((b,U)=>b+U.amount,0);return{expense:F,income:B,balance:B-F,count:m.length}},saveToStorage:E,clearAll:async()=>{o.value=[],await E()},importData:async m=>{m&&Array.isArray(m)&&(o.value=m.sort((F,B)=>new Date(B.date).getTime()-new Date(F.date).getTime()),await E())},exportData:()=>o.value}}),Mr=Yt("tags",()=>{const o=ae([]),h=ae(!1),T=["#1989fa","#07c160","#ff976a","#ff5b5b","#9a66e4","#5c7dfa","#ee0a24","#ffcd42","#01d0c4","#7232dd","#e8b878","#6d8a9c"],E=[{name:"餐饮",color:"#ff976a",type:"expense"},{name:"交通",color:"#1989fa",type:"expense"},{name:"购物",color:"#ff5b5b",type:"expense"},{name:"娱乐",color:"#9a66e4",type:"expense"},{name:"医疗",color:"#01d0c4",type:"expense"},{name:"工资",color:"#07c160",type:"income"},{name:"理财",color:"#5c7dfa",type:"income"},{name:"其他",color:"#6d8a9c",type:"both"}],P=async()=>{h.value=!0;try{const b=await At.getItem("tags");if(b&&Array.isArray(b))o.value=b;else{for(const U of E)o.value.push({id:$(),...U,createTime:new Date().toISOString()});await _()}}catch(b){console.error("加载标签数据失败:",b)}finally{h.value=!1}},_=async()=>{try{await At.setItem("tags",o.value)}catch(b){console.error("保存标签数据失败:",b)}},$=()=>Date.now().toString(36)+Math.random().toString(36).substr(2,9),w=async b=>{const U={id:$(),name:b.name,color:b.color||T[0],type:b.type||"both",createTime:new Date().toISOString()};return o.value.push(U),await _(),U},A=async(b,U)=>{const l=o.value.findIndex(S=>S.id===b);return l!==-1?(o.value[l]={...o.value[l],...U,updateTime:new Date().toISOString()},await _(),o.value[l]):null},C=async b=>{const U=o.value.findIndex(l=>l.id===b);return U!==-1?(o.value.splice(U,1),await _(),!0):!1},z=b=>o.value.find(U=>U.id===b),c=b=>!b||!Array.isArray(b)?[]:o.value.filter(U=>b.includes(U.id)),x=b=>!b||b==="both"?o.value:o.value.filter(U=>U.type===b||U.type==="both"),N=Pe(()=>o.value.filter(b=>b.type==="expense"||b.type==="both")),Y=Pe(()=>o.value.filter(b=>b.type==="income"||b.type==="both"));return{tags:o,loading:h,presetColors:T,init:P,addTag:w,updateTag:A,deleteTag:C,getTag:z,getTagsByIds:c,getTagsByType:x,expenseTags:N,incomeTags:Y,getTagsWithUsage:b=>o.value.map(U=>{const l=b.records.filter(S=>S.tagIds&&S.tagIds.includes(U.id)).length;return{...U,usageCount:l}}).sort((U,l)=>l.usageCount-U.usageCount),saveToStorage:_,clearAll:async()=>{o.value=[],await _()},importData:async b=>{b&&Array.isArray(b)&&(o.value=b,await _())},exportData:()=>o.value}}),Lr=(o,h)=>{const T=o.__vccOpts||o;for(const[E,P]of h)T[E]=P;return T};export{Cr as C,Rr as L,Br as N,ur as O,Or as P,Lr as _,nr as a,Pr as b,Mr as c,Ie as d,Nr as e,$r as f,Wt as g,vr as h,Ft as p,Kn as u};
