import{ax as Le,ay as ze,ae as We,az as De,aA as $e,i as Z,a4 as le,n as W,k as Q,m as U,h as de,d as F,l as fe,aB as Oe,A as ge,D as K,C as Ne,b as me,f as y,c as d,o as he,r as z,j as _,aC as ce,aD as Fe,aa as be,G as J,ac as N,I as X,x as ae,O as je,aE as qe,aq as Ge,aF as He,z as p,aG as Ke,e as Ye,t as Ue,ab as Je,al as Xe,a as Qe,ag as Ze,g as pe}from"./index-Benjlr5I.js";import{h as et,u as ve,C as tt,a as nt}from"./_plugin-vue_export-helper-CSfwAwDO.js";import{u as at}from"./use-id-BsUR0Dcz.js";function ke(e){return Array.isArray(e)?!e.length:e===0?!1:!e}function lt(e,n){if(ke(e)){if(n.required)return!1;if(n.validateEmpty===!1)return!0}return!(n.pattern&&!n.pattern.test(String(e)))}function ot(e,n){return new Promise(o=>{const c=n.validator(e,n);if($e(c)){c.then(o);return}o(c)})}function se(e,n){const{message:o}=n;return De(o)?o(e,n):o||""}function it({target:e}){e.composing=!0}function ue({target:e}){e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}function rt(e,n){const o=Le();e.style.height="auto";let c=e.scrollHeight;if(ze(n)){const{maxHeight:a,minHeight:l}=n;a!==void 0&&(c=Math.min(c,a)),l!==void 0&&(c=Math.max(c,l))}c&&(e.style.height=`${c}px`,We(o))}function ct(e,n){return e==="number"&&(e="text",n??(n="decimal")),e==="digit"&&(e="tel",n??(n="numeric")),{type:e,inputmode:n}}function Y(e){return[...e].length}function te(e,n){return[...e].slice(0,n).join("")}const[st,S]=Z("field"),ut={id:String,name:String,leftIcon:String,rightIcon:String,autofocus:Boolean,clearable:Boolean,maxlength:W,max:Number,min:Number,formatter:Function,clearIcon:U("clear"),modelValue:de(""),inputAlign:String,placeholder:String,autocomplete:String,autocapitalize:String,autocorrect:String,errorMessage:String,enterkeyhint:String,clearTrigger:U("focus"),formatTrigger:U("onChange"),spellcheck:{type:Boolean,default:null},error:{type:Boolean,default:null},disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},inputmode:String},dt=le({},et,ut,{rows:W,type:U("text"),rules:Array,autosize:[Boolean,Object],labelWidth:W,labelClass:Q,labelAlign:String,showWordLimit:Boolean,errorMessageAlign:String,colon:{type:Boolean,default:null}});var ft=F({name:st,props:dt,emits:["blur","focus","clear","keypress","clickInput","endValidate","startValidate","clickLeftIcon","clickRightIcon","update:modelValue"],setup(e,{emit:n,slots:o}){const c=at(),a=he({status:"unvalidated",focused:!1,validateMessage:""}),l=z(),V=z(),I=z(),{parent:m}=fe(Oe),x=()=>{var t;return String((t=e.modelValue)!=null?t:"")},u=t=>{if(_(e[t]))return e[t];if(m&&_(m.props[t]))return m.props[t]},P=y(()=>{const t=u("readonly");if(e.clearable&&!t){const r=x()!=="",s=e.clearTrigger==="always"||e.clearTrigger==="focus"&&a.focused;return r&&s}return!1}),f=y(()=>I.value&&o.input?I.value():e.modelValue),C=y(()=>{var t;const r=u("required");return r==="auto"?(t=e.rules)==null?void 0:t.some(s=>s.required):r}),b=t=>t.reduce((r,s)=>r.then(()=>{if(a.status==="failed")return;let{value:g}=f;if(s.formatter&&(g=s.formatter(g,s)),!lt(g,s)){a.status="failed",a.validateMessage=se(g,s);return}if(s.validator)return ke(g)&&s.validateEmpty===!1?void 0:ot(g,s).then(h=>{h&&typeof h=="string"?(a.status="failed",a.validateMessage=h):h===!1&&(a.status="failed",a.validateMessage=se(g,s))})}),Promise.resolve()),k=()=>{a.status="unvalidated",a.validateMessage=""},T=()=>n("endValidate",{status:a.status,message:a.validateMessage}),R=(t=e.rules)=>new Promise(r=>{k(),t?(n("startValidate"),b(t).then(()=>{a.status==="failed"?(r({name:e.name,message:a.validateMessage}),T()):(a.status="passed",r(),T())})):r()}),$=t=>{if(m&&e.rules){const{validateTrigger:r}=m.props,s=ce(r).includes(t),g=e.rules.filter(h=>h.trigger?ce(h.trigger).includes(t):s);g.length&&R(g)}},ee=t=>{var r;const{maxlength:s}=e;if(_(s)&&Y(t)>+s){const g=x();if(g&&Y(g)===+s)return g;const h=(r=l.value)==null?void 0:r.selectionEnd;if(a.focused&&h){const A=[...t],L=A.length-+s;return A.splice(h-L,L),A.join("")}return te(t,+s)}return t},B=(t,r="onChange")=>{var s,g;const h=t;t=ee(t);const A=h.length-t.length;if(e.type==="number"||e.type==="digit"){const E=e.type==="number";if(t=Fe(t,E,E),r==="onBlur"&&t!==""&&(e.min!==void 0||e.max!==void 0)){const w=be(+t,(s=e.min)!=null?s:-1/0,(g=e.max)!=null?g:1/0);+t!==w&&(t=w.toString())}}let L=0;if(e.formatter&&r===e.formatTrigger){const{formatter:E,maxlength:w}=e;if(t=E(t),_(w)&&Y(t)>+w&&(t=te(t,+w)),l.value&&a.focused){const{selectionEnd:H}=l.value,re=te(h,H);L=E(re).length-re.length}}if(l.value&&l.value.value!==t)if(a.focused){let{selectionStart:E,selectionEnd:w}=l.value;if(l.value.value=t,_(E)&&_(w)){const H=t.length;A?(E-=A,w-=A):L&&(E+=L,w+=L),l.value.setSelectionRange(Math.min(E,H),Math.min(w,H))}}else l.value.value=t;t!==e.modelValue&&n("update:modelValue",t)},j=t=>{t.target.composing||B(t.target.value)},D=()=>{var t;return(t=l.value)==null?void 0:t.blur()},O=()=>{var t;return(t=l.value)==null?void 0:t.focus()},i=()=>{const t=l.value;e.type==="textarea"&&e.autosize&&t&&rt(t,e.autosize)},v=t=>{a.focused=!0,n("focus",t),K(i),u("readonly")&&D()},M=t=>{a.focused=!1,B(x(),"onBlur"),n("blur",t),!u("readonly")&&($("onBlur"),K(i),qe())},q=t=>n("clickInput",t),G=t=>n("clickLeftIcon",t),Ve=t=>n("clickRightIcon",t),Ie=t=>{J(t),n("update:modelValue",""),n("clear",t)},oe=y(()=>{if(typeof e.error=="boolean")return e.error;if(m&&m.props.showError&&a.status==="failed")return!0}),xe=y(()=>{const t=u("labelWidth"),r=u("labelAlign");if(t&&r!=="top")return{width:N(t)}}),we=t=>{t.keyCode===13&&(!(m&&m.props.submitOnEnter)&&e.type!=="textarea"&&J(t),e.type==="search"&&D()),n("keypress",t)},ie=()=>e.id||`${c}-input`,Ee=()=>a.status,Pe=()=>{const t=S("control",[u("inputAlign"),{error:oe.value,custom:!!o.input,"min-height":e.type==="textarea"&&!e.autosize}]);if(o.input)return d("div",{class:t,onClick:q},[o.input()]);const r={id:ie(),ref:l,name:e.name,rows:e.rows!==void 0?+e.rows:void 0,class:t,disabled:u("disabled"),readonly:u("readonly"),autofocus:e.autofocus,placeholder:e.placeholder,autocomplete:e.autocomplete,autocapitalize:e.autocapitalize,autocorrect:e.autocorrect,enterkeyhint:e.enterkeyhint,spellcheck:e.spellcheck,"aria-labelledby":e.label?`${c}-label`:void 0,"data-allow-mismatch":"attribute",onBlur:M,onFocus:v,onInput:j,onClick:q,onChange:ue,onKeypress:we,onCompositionend:ue,onCompositionstart:it};return e.type==="textarea"?d("textarea",ae(r,{inputmode:e.inputmode}),null):d("input",ae(ct(e.type,e.inputmode),r),null)},Te=()=>{const t=o["left-icon"];if(e.leftIcon||t)return d("div",{class:S("left-icon"),onClick:G},[t?t():d(X,{name:e.leftIcon,classPrefix:e.iconPrefix},null)])},Re=()=>{const t=o["right-icon"];if(e.rightIcon||t)return d("div",{class:S("right-icon"),onClick:Ve},[t?t():d(X,{name:e.rightIcon,classPrefix:e.iconPrefix},null)])},Me=()=>{if(e.showWordLimit&&e.maxlength){const t=Y(x());return d("div",{class:S("word-limit")},[d("span",{class:S("word-num")},[t]),je("/"),e.maxlength])}},_e=()=>{if(m&&m.props.showErrorMessage===!1)return;const t=e.errorMessage||a.validateMessage;if(t){const r=o["error-message"],s=u("errorMessageAlign");return d("div",{class:S("error-message",s)},[r?r({message:t}):t])}},Be=()=>{const t=u("labelWidth"),r=u("labelAlign"),s=u("colon")?":":"";if(o.label)return[o.label(),s];if(e.label)return d("label",{id:`${c}-label`,for:o.input?void 0:ie(),"data-allow-mismatch":"attribute",onClick:g=>{J(g),O()},style:r==="top"&&t?{width:N(t)}:void 0},[e.label+s])},Ae=()=>[d("div",{class:S("body")},[Pe(),P.value&&d(X,{ref:V,name:e.clearIcon,class:S("clear")},null),Re(),o.button&&d("div",{class:S("button")},[o.button()])]),Me(),_e()];return ve({blur:D,focus:O,validate:R,formValue:f,resetValidation:k,getValidationStatus:Ee}),Ge(He,{customValue:I,resetValidation:k,validateWithTrigger:$}),ge(()=>e.modelValue,()=>{B(x()),k(),$("onChange"),K(i)}),Ne(()=>{B(x(),e.formatTrigger),K(i)}),me("touchstart",Ie,{target:y(()=>{var t;return(t=V.value)==null?void 0:t.$el})}),()=>{const t=u("disabled"),r=u("labelAlign"),s=Te(),g=()=>{const h=Be();return r==="top"?[s,h].filter(Boolean):h||[]};return d(tt,{size:e.size,class:S({error:oe.value,disabled:t,[`label-${r}`]:r}),center:e.center,border:e.border,isLink:e.isLink,clickable:e.clickable,titleStyle:xe.value,valueClass:S("value"),titleClass:[S("label",[r,{required:C.value}]),e.labelClass],arrowDirection:e.arrowDirection},{icon:s&&r!=="top"?()=>s:null,title:g,value:Ae,extra:o.extra})}}});const Pt=p(ft),[Ce,gt]=Z("radio-group"),mt={shape:String,disabled:Boolean,iconSize:W,direction:String,modelValue:Q,checkedColor:String},Se=Symbol(Ce);var ht=F({name:Ce,props:mt,emits:["change","update:modelValue"],setup(e,{emit:n,slots:o}){const{linkChildren:c}=Ye(Se),a=l=>n("update:modelValue",l);return ge(()=>e.modelValue,l=>n("change",l)),c({props:e,updateValue:a}),Ke(()=>e.modelValue),()=>{var l;return d("div",{class:gt([e.direction]),role:"radiogroup"},[(l=o.default)==null?void 0:l.call(o)])}}});const Tt=p(ht),ye={name:Q,disabled:Boolean,iconSize:W,modelValue:Q,checkedColor:String,labelPosition:String,labelDisabled:Boolean};var bt=F({props:le({},ye,{bem:Je(Function),role:String,shape:String,parent:Object,checked:Boolean,bindGroup:Ue,indeterminate:{type:Boolean,default:null}}),emits:["click","toggle"],setup(e,{emit:n,slots:o}){const c=z(),a=f=>{if(e.parent&&e.bindGroup)return e.parent.props[f]},l=y(()=>{if(e.parent&&e.bindGroup){const f=a("disabled")||e.disabled;if(e.role==="checkbox"){const C=a("modelValue").length,b=a("max"),k=b&&C>=+b;return f||k&&!e.checked}return f}return e.disabled}),V=y(()=>a("direction")),I=y(()=>{const f=e.checkedColor||a("checkedColor");if(f&&(e.checked||e.indeterminate)&&!l.value)return{borderColor:f,backgroundColor:f}}),m=y(()=>e.shape||a("shape")||"round"),x=f=>{const{target:C}=f,b=c.value,k=b===C||b?.contains(C);!l.value&&(k||!e.labelDisabled)&&n("toggle"),n("click",f)},u=()=>{var f,C;const{bem:b,checked:k,indeterminate:T}=e,R=e.iconSize||a("iconSize");return d("div",{ref:c,class:b("icon",[m.value,{disabled:l.value,checked:k,indeterminate:T}]),style:m.value!=="dot"?{fontSize:N(R)}:{width:N(R),height:N(R),borderColor:(f=I.value)==null?void 0:f.borderColor}},[o.icon?o.icon({checked:k,disabled:l.value}):m.value!=="dot"?d(X,{name:T?"minus":"success",style:I.value},null):d("div",{class:b("icon--dot__icon"),style:{backgroundColor:(C=I.value)==null?void 0:C.backgroundColor}},null)])},P=()=>{const{checked:f}=e;if(o.default)return d("span",{class:e.bem("label",[e.labelPosition,{disabled:l.value}])},[o.default({checked:f,disabled:l.value})])};return()=>{const f=e.labelPosition==="left"?[P(),u()]:[u(),P()];return d("div",{role:e.role,class:e.bem([{disabled:l.value,"label-disabled":e.labelDisabled},V.value]),tabindex:l.value?void 0:0,"aria-checked":e.checked,onClick:x},[f])}}});const vt=le({},ye,{shape:String}),[kt,Ct]=Z("radio");var St=F({name:kt,props:vt,emits:["update:modelValue"],setup(e,{emit:n,slots:o}){const{parent:c}=fe(Se),a=()=>(c?c.props.modelValue:e.modelValue)===e.name,l=()=>{c?c.updateValue(e.name):n("update:modelValue",e.name)};return()=>d(bt,ae({bem:Ct,role:"radio",parent:c,checked:a(),onToggle:l},e),Xe(o,["default","icon"]))}});const Rt=p(St),[yt,ne]=Z("swipe-cell"),Vt={name:de(""),disabled:Boolean,leftWidth:W,rightWidth:W,beforeClose:Function,stopPropagation:Boolean};var It=F({name:yt,props:Vt,emits:["open","close","click"],setup(e,{emit:n,slots:o}){let c,a,l,V;const I=z(),m=z(),x=z(),u=he({offset:0,dragging:!1}),P=nt(),f=i=>i.value?pe(i).width:0,C=y(()=>_(e.leftWidth)?+e.leftWidth:f(m)),b=y(()=>_(e.rightWidth)?+e.rightWidth:f(x)),k=i=>{u.offset=i==="left"?C.value:-b.value,c||(c=!0,n("open",{name:e.name,position:i}))},T=i=>{u.offset=0,c&&(c=!1,n("close",{name:e.name,position:i}))},R=i=>{const v=Math.abs(u.offset),M=.15,q=c?1-M:M,G=i==="left"?C.value:b.value;G&&v>G*q?k(i):T(i)},$=i=>{e.disabled||(l=u.offset,P.start(i))},ee=i=>{if(e.disabled)return;const{deltaX:v}=P;P.move(i),P.isHorizontal()&&(a=!0,u.dragging=!0,(!c||v.value*l<0)&&J(i,e.stopPropagation),u.offset=be(v.value+l,-b.value,C.value))},B=()=>{u.dragging&&(u.dragging=!1,R(u.offset>0?"left":"right"),setTimeout(()=>{a=!1},0))},j=(i="outside",v)=>{V||(n("click",i),c&&!a&&(V=!0,Ze(e.beforeClose,{args:[{event:v,name:e.name,position:i}],done:()=>{V=!1,T(i)},canceled:()=>V=!1,error:()=>V=!1})))},D=i=>v=>{(a||c)&&v.stopPropagation(),!a&&j(i,v)},O=(i,v)=>{const M=o[i];if(M)return d("div",{ref:v,class:ne(i),onClick:D(i)},[M()])};return ve({open:k,close:T}),Qe(I,i=>j("outside",i),{eventName:"touchstart"}),me("touchmove",ee,{target:I}),()=>{var i;const v={transform:`translate3d(${u.offset}px, 0, 0)`,transitionDuration:u.dragging?"0s":".6s"};return d("div",{ref:I,class:ne(),onClick:D("cell"),onTouchstartPassive:$,onTouchend:B,onTouchcancel:B},[d("div",{class:ne("wrapper"),style:v},[O("left",m),(i=o.default)==null?void 0:i.call(o),O("right",x)])])}}});const Mt=p(It);export{Pt as F,Tt as R,Mt as S,Rt as a};
